<main id="frontpage">

  <section class="introduction">

    <div class="skew"></div>
    

    <div class="explainer">
			<h1>
				<u>Nausikaä</u>, a CSS toolkit for accessible websites
			</h1>

      <p><u>Nausikaä</u> aims to provide builders with one CSS file that takes care of all accessibity needs. Users of every type are welcome, regardless of their device, screen or input method. And that does not mean it has to look boring.</p>

      <p>CSS classes are used as little as possible by <u>Nausikaä</u>. It does have a few for colors and style, but little for layout. It does have a few opinions about how you structure your HTML, but hopefully not too strong.</p>

      <p><u>Nausikaä</u> is free for everyone!</p>
    </div>

    <div class="illustration"></div>

  </section>
<section class="elaboration">

    <div class="skew"></div>
    
    <h2>Elaborate on the versatility of <u>Nausikaä</u> and her merits</h2>

    <div class="explainer">

      <p>Culpa, est. Assumenda maiores rem officia laboriosam numquam maxime, esse amet sequi illum, vel magni exercitationem! Ratione nam eveniet quam nisi aperiam, dolorem aut, rem iure, mollitia libero illo.</p>

      <p>Vel deleniti nisi maxime magni libero reiciendis porro nesciunt alias, delectus sint ratione suscipit, quibusdam exercitationem! Nulla, corporis, perferendis aliquam laudantium quam inventore, non aperiam accusantium, laborum suscipit eos amet?</p>
    </div>

    <div class="illustration">
      
      <div class="elaboration-cluster elaboration-cluster-01">
      
          <svg class="house-05" style="top: -1.2em; left: 1.2em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg> 

          <svg class="house-11" style="top: -1em; left: 4.2em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg> 

          <svg class="house-09" style="top: 1.2em; left: 3.2em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg>

          <svg class="house-01" style="top: 5.2em; left: -.8em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>

          <!-- start -->
          <svg class="house-10" style="top: 1em; left: 14.5em;">
            <use xlink:href="/images/buildings.svg#house-10"></use>
          </svg>   

          <svg class="house-09" style="top: 1.8em; left: 8.7em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg>

          <svg class="house-06" style="top: 1.1em; left: 11em;">
            <use xlink:href="/images/buildings.svg#house-06"></use>
          </svg>   

          <svg class="house-01" style="top: 2.3em; left: 12.9em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>      

          <svg class="house-01" style="top: 3em; left: 7.4em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>    

          <svg class="house-11" style="top: 3em; left: 10em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg> 

          <svg class="house-02" style="top: 4.3em; left: 12.2em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg> 
          <!-- end --> 
      
          <!-- start -->
          <svg class="house-01" style="top: 5em; left: 9.5em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>   

          <svg class="house-11" style="top: 5.8em; left: 3.7em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>

          <svg class="house-04" style="top: 5.1em; left: 6em;">
            <use xlink:href="/images/buildings.svg#house-04"></use>
          </svg>   

          <svg class="house-02" style="top: 6.3em; left: 7.9em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg>      

          <svg class="house-11" style="top: 8em; left: 2.4em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>    

          <svg class="house-03" style="top: 8em; left: 5em;">
            <use xlink:href="/images/buildings.svg#house-03"></use>
          </svg> 

          <svg class="house-05" style="top: 9.3em; left: 7.2em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg> 
          <!-- end --> 


          <svg class="house-05" style="top: 1.2em; left: 17.2em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg> 

          <svg class="house-11" style="top: 1em; left: 24.2em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg> 

          <svg class="house-09" style="top: 3.2em; left: 18.2em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg>

      
          <!-- start -->

          <svg class="house-01" style="top: 3.9em; left: 21.2em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg> 

          <svg class="house-09" style="top: 5.2em; left: 23.2em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg> 

          <svg class="house-08" style="top: 5em; left: 17.5em;">
            <use xlink:href="/images/buildings.svg#house-08"></use>
          </svg>   

          <svg class="house-09" style="top: 5.8em; left: 11.7em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg>

          <svg class="house-01" style="top: 5.1em; left: 14em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>   

          <svg class="house-11" style="top: 6.3em; left: 15.9em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>      

          <svg class="house-08" style="top: 8em; left: 10.4em;">
            <use xlink:href="/images/buildings.svg#house-08"></use>
          </svg>    

          <svg class="house-07" style="top: 8em; left: 13em;">
            <use xlink:href="/images/buildings.svg#house-07"></use>
          </svg> 

          <!-- end --> 

          <svg class="arch-07" style="top: 7.4em; left: 6.7em;">
            <use xlink:href="/images/buildings.svg#arch-07"></use>
          </svg> 

          <!-- start -->

          <svg class="house-03" style="top: 18.9em; left: 21.2em;">
            <use xlink:href="/images/buildings.svg#house-03"></use>
          </svg> 

          <svg class="house-07" style="top: 20.2em; left: 23.2em;">
            <use xlink:href="/images/buildings.svg#house-07"></use>
          </svg> 

          <svg class="house-05" style="top: 20em; left: 17.5em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg>   

          <svg class="house-11" style="top: 20.8em; left: 11.7em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>

          <svg class="house-02" style="top: 20.1em; left: 14em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg>   

          <svg class="house-11" style="top: 21.3em; left: 15.9em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>      

          <svg class="house-12" style="top: 23em; left: 10.4em;">
            <use xlink:href="/images/buildings.svg#house-12"></use>
          </svg>    

          <svg class="house-01" style="top: 23em; left: 13em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg> 

          <!-- end --> 

          <!-- start -->


          <svg class="house-07" style="top: 22em; left: 22.5em;">
            <use xlink:href="/images/buildings.svg#house-07"></use>
          </svg>   

          <svg class="house-01" style="top: 22.8em; left: 16.7em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg>

          <svg class="house-08" style="top: 22.1em; left: 19em;">
            <use xlink:href="/images/buildings.svg#house-08"></use>
          </svg>   

          <svg class="house-02" style="top: 23.3em; left: 20.9em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg>      

          <svg class="house-09" style="top: 26em; left: 15.4em;">
            <use xlink:href="/images/buildings.svg#house-09"></use>
          </svg>    

          <svg class="house-02" style="top: 26.5em; left: 18em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg> 

          <svg class="house-11" style="top: 23.3em; left: 24.9em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>      

          <svg class="house-07" style="top: 26em; left: 21em;">
            <use xlink:href="/images/buildings.svg#house-07"></use>
          </svg>    

          <svg class="house-01" style="top: 26.5em; left: 24em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg> 

          <!-- end --> 

          <!-- start -->
          <svg class="house-12" style="top: 25em; left: 11.5em;">
            <use xlink:href="/images/buildings.svg#house-12"></use>
          </svg>   

          <svg class="house-04" style="top: 25.8em; left: 5.7em;">
            <use xlink:href="/images/buildings.svg#house-04"></use>
          </svg>

          <svg class="house-02" style="top: 25.1em; left: 8em;">
            <use xlink:href="/images/buildings.svg#house-02"></use>
          </svg>   

          <svg class="house-05" style="top: 26.3em; left: 9.9em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg>      

          <svg class="house-08" style="top: 28em; left: 4.4em;">
            <use xlink:href="/images/buildings.svg#house-08"></use>
          </svg>    

          <svg class="house-11" style="top: 28em; left: 7em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg> 

          <svg class="house-01" style="top: 29.3em; left: 9.2em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg> 
          <!-- end --> 



          <svg class="house-11" style="top: 27.2em; left: 28.9em;">
            <use xlink:href="/images/buildings.svg#house-11"></use>
          </svg>      

          <svg class="house-07" style="top: 29em; left: 27em;">
            <use xlink:href="/images/buildings.svg#house-07"></use>
          </svg>    

          <svg class="house-01" style="top: 29.5em; left: 30em;">
            <use xlink:href="/images/buildings.svg#house-01"></use>
          </svg> 

          <svg class="house-05" style="top: 29em; left: -3em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg>    

          <svg class="house-10" style="top: 29.5em; left: 1em;">
            <use xlink:href="/images/buildings.svg#house-10"></use>
          </svg> 

          <svg class="house-05" style="top: 29em; left: 15em;">
            <use xlink:href="/images/buildings.svg#house-05"></use>
          </svg>    

          <svg class="house-12" style="top: 29.5em; left: 17.2em;">
            <use xlink:href="/images/buildings.svg#house-12"></use>
          </svg>  

          <svg class="house-12" style="top: 30em; left: 37.2em;">
            <use xlink:href="/images/buildings.svg#house-12"></use>
          </svg> 

      </div>
    </div>

  </section>

  <section class="more-elaboration">

    <div class="skew"></div>
    
    <h2>Elaborate on the versatility of <u>Nausikaä</u></h2>

    <div class="explainer">

      <p>Culpa, est. Assumenda maiores rem officia laboriosam numquam maxime, esse amet sequi illum, vel magni exercitationem! Ratione nam eveniet quam nisi aperiam, dolorem aut, rem iure, mollitia libero illo.</p>

      <p>Vel deleniti nisi maxime magni libero reiciendis porro nesciunt alias, delectus sint ratione suscipit, quibusdam exercitationem! Nulla, corporis, perferendis aliquam laudantium quam inventore, non aperiam accusantium, laborum suscipit eos amet?</p>
    </div>

  </section>

</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const illustration = document.querySelector('.introduction .illustration');
    if (!illustration) return;

    illustration.setAttribute('aria-hidden', 'true');

    const houses = [
      'house-01',
      'house-02',
      'house-03',
      'house-04',
      'house-05',
      'house-06',
      'house-07',
      'house-08',
      'house-09',
      'house-10',
      'house-11',
      'house-12'
    ];

    const spikes = ['spike-01', 'spike-02', 'spike-03', 'spike-04', 'spike-05'];

    const clusters = [
      {
        className: 'intro-cluster intro-cluster-01',
       	height: 3,
        count: 150,
        spikes: 1,
        xRange: [-5, 30],
        yRange: [-3, -15],
      },
      // {
      //   className: 'intro-cluster intro-cluster-02',
      //   height: 10,
      //   count: 18,
      //   spikes: 2,
      //   xRange: [-6, 26],
      //   yRange: [-6, 8],
      // },
      // {
      //   className: 'intro-cluster intro-cluster-03',
      //   height: 0,
      //   count: 20,
      //   spikes: 3,
      //   xRange: [-22, 34],
      //   yRange: [-7, 7],
      // }
    ];

    const footprint = {
      house: { width: 3, baseDepth: 1.3, bufferEm: .02 }, // sizes from _buildings.scss
      spike: { width: 8.1, baseDepth: 3, bufferEm: .02 }
    };

    const pick = (list) => list[Math.floor(Math.random() * list.length)];
    const rand = (min, max) => Math.random() * (max - min) + min;

    function generateBuildings(config) {
      const items = [];
      const maxAttempts = config.count * 60;
      let attempts = 0;
      let spikesLeft = config.spikes;

      function intersects(candidate, existing) {
        const buffer = Math.max(candidate.bufferEm, existing.bufferEm); // perimeter around bases
        const verticalTolerance = Math.max(candidate.baseDepth, existing.baseDepth) + 0.5;
        const cLeft = candidate.x - buffer;
        const cRight = candidate.x + candidate.width + buffer;
        const eLeft = existing.x - buffer;
        const eRight = existing.x + existing.width + buffer;
        const horizontalOverlap = cLeft < eRight && cRight > eLeft;
        const verticalClose = Math.abs(candidate.y - existing.y) < verticalTolerance;
        return horizontalOverlap && verticalClose;
      }

      while (items.length < config.count && attempts < maxAttempts) {
        attempts += 1;
        const isSpike =
          spikesLeft > 0 && Math.random() < spikesLeft / Math.max(config.count - items.length, 1);
        const symbolId = isSpike ? pick(spikes) : pick(houses);
        const fp = isSpike ? footprint.spike : footprint.house;
        const position = {
          x: rand(config.xRange[0], config.xRange[1]),
          y: rand(config.yRange[0], config.yRange[1]),
          width: fp.width,
          baseDepth: fp.baseDepth,
          bufferEm: fp.bufferEm
        };

        if (items.some((existing) => intersects(position, existing.position))) {
          continue;
        }

        if (isSpike) spikesLeft -= 1;
        items.push({ position, symbolId });
      }

      return items;
    }

    function createBuilding(symbolId, position) {
      const svgNS = 'http://www.w3.org/2000/svg';
      const xlinkNS = 'http://www.w3.org/1999/xlink';
      const svg = document.createElementNS(svgNS, 'svg');
      svg.classList.add(symbolId);
      svg.style.left = position.x.toFixed(2) + 'em';
      svg.style.bottom = position.y.toFixed(2) + 'em';
      svg.setAttribute('focusable', 'false');
      svg.setAttribute('aria-hidden', 'true');

      const use = document.createElementNS(svgNS, 'use');
      use.setAttributeNS(xlinkNS, 'xlink:href', '/images/buildings.svg#' + symbolId);
      svg.appendChild(use);

      return svg;
    }

    clusters.forEach((config) => {
      const cluster = document.createElement('div');
      cluster.className = config.className;
      cluster.style.height = config.height + 'em';

      const items = generateBuildings(config);

      items
        .sort((a, b) => {
          if (a.position.y !== b.position.y) return b.position.y - a.position.y; // top to bottom
          return a.position.x - b.position.x; // left to right
        })
        .forEach((item) => {
          cluster.appendChild(createBuilding(item.symbolId, item.position));
        });

      illustration.appendChild(cluster);
    });
  });
</script>
